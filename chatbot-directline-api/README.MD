# æ©Ÿå™¨äººå°è©± API èªªæ˜

## æ¦‚è¿°

Direct Line API ç›´æ¥èˆ‡æˆ‘å€‘çš„æ©Ÿå™¨äººæœå‹™å°è©±ï¼Œå¯ä»¥è¦ç›´æ¥æ§åˆ¶å°è©±æµç¨‹ã€‚

**é‡è¦**: ä½¿ç”¨æœ¬ API å‰ï¼Œè«‹å…ˆå‘æˆ‘å€‘çš„æŠ€è¡“æ”¯æ´åœ˜éšŠç”³è«‹ Bot Secretï¼Œé€™æ˜¯è¨ªå•æˆ‘å€‘æœå‹™çš„å¿…è¦æ†‘è­‰ã€‚

## å¿«é€Ÿé–‹å§‹

### ç¨‹å¼èªè¨€ç¯„ä¾‹

æˆ‘å€‘æä¾›å¤šç¨®ç¨‹å¼èªè¨€çš„å®Œæ•´ç¯„ä¾‹ï¼ŒåŒ…å«æ‰€æœ‰ API èª¿ç”¨çš„å¯¦ä½œï¼š

- ğŸ“ [Python ç¯„ä¾‹](python_demo/) - å®Œæ•´çš„ Python å¯¦ä½œ
- ğŸ˜ [PHP ç¯„ä¾‹](php_demo/) - å®Œæ•´çš„ PHP å¯¦ä½œ

## åŸºç¤è³‡è¨Š

- **Base URL**: `https://directline.botframework.com/v3/directline`
- **èªè­‰æ–¹å¼**: Bearer Token
- **å…§å®¹é¡å‹**: `application/json`

## API ç«¯é»è©³ç´°èªªæ˜

### 1. ç”Ÿæˆ Token

**ç«¯é»**: `POST /tokens/generate`

**ç”¨é€”**: ç”Ÿæˆç”¨æ–¼å¾ŒçºŒ API èª¿ç”¨çš„è¨ªå• token

####  Request åƒæ•¸

**Headers**:
```
Authorization: Bearer {YOUR_BOT_SECRET}
Content-Type: application/json
```

**æ³¨æ„**: `YOUR_BOT_SECRET` éœ€è¦å‘æˆ‘å€‘çš„æŠ€è¡“æ”¯æ´åœ˜éšŠç”³è«‹å–å¾—ï¼Œè«‹è¯ç¹«æˆ‘å€‘çš„å®¢æˆ¶æœå‹™éƒ¨é–€ç²å–å°ˆå±¬çš„ Bot Secretã€‚

**Request Body**: `{}` (ç„¡)

#### Response åƒæ•¸

**æˆåŠŸ Response** (status_code =  200):

| æ¬„ä½åç¨± | é¡å‹ | å¿…å¡« | æè¿° | ç¯„ä¾‹å€¼ |
|---------|------|------|------|--------|
| `conversationId` | string | æ˜¯ | å°è©±çš„å”¯ä¸€æ¨™è­˜ç¬¦ | `"IxMX0bH5G4aKssAPYa18Pu-as"` |
| `token` | string | æ˜¯ | JWT æ ¼å¼çš„è¨ªå• token | `"eyJhbGciOiJSUzI1NiIsImtpZCI6IkpHd3R5VFZ6S1Z3ZjVIT0U5YlpqWmNFdjEtbyIsIng1dCI6IkpHd3R5VFZ6S1Z3ZjVIT0U5YlpqWmNFdjEtbyIsInR5cCI6IkpXVCJ9..."` |
| `expires_in` | integer | æ˜¯ |  tokenéæœŸæ™‚é–“ï¼ˆç§’ï¼‰ | `3600` |

**Response ç¯„ä¾‹**:
```json
{
  "conversationId": "IxMX0bH5G4aKssAPYa18Pu-as",
  "token": "eyJhbGciOiJSUzI1NiIsImtpZCI6IkpHd3R5VFZ6S1Z3ZjVIT0U5YlpqWmNFdjEtbyIsIng1dCI6IkpHd3R5VFZ6S1Z3ZjVIT0U5YlpqWmNFdjEtbyIsInR5cCI6IkpXVCJ9.eyJib3QiOiJncmFwaGljLWJvdCIsInNpdGUiOiI5M3hlOHdrM1VmcndnOXNnaWRzam9BQWpxWjlTeXJlZGFRV3JicXJsMklqM3V3VEtHN1QwSlFRSjk5QkdBQzI0cGJFQUFyb2hBQUFCQVpCUzJwWjgiLCJjb252IjoiSXhNWDBiSDVHNGFLc3NBUFlhMThQdS1hcyIsIm5iZiI6MTc1Mjg1MzE4MSwiZXhwIjoxNzUyODU2NzgxLCJpc3MiOiJodHRwczovL2RpcmVjdGxpbmUuYm90ZnJhbWV3b3JrLmNvbS8iLCJhdWQiOiJodHRwczovL2RpcmVjdGxpbmUuYm90ZnJhbWV3b3JrLmNvbS8ifQ.yyAWWX8sX-Mq__5u68I_XIGv7-SJdyJIXu9byRexm9QFE6yil4F8gk7LmTFbRqjdrYm-ufJh2tOCAOmRDno5HR9qjGh0p8Xkrs2vZDlVdwawBefUABiihFn96tSb61prumoRkc1nV--bKqy3CBKzE6orafwDCH7uarUlrL2EGt12wNo0XF-_nqreLH7OIwomKxdsGqX7HAByufQu4pj326LGFnFbtlzyVJi96BN59YypZrp6YbxTJ7Vd14jao8XzU8OfQBDzcAXLRuSteB1cd2nXpHFbAFAOjwaoqNkxAncpO2UD6qmbi1trp6y5jImsPpsgvG45X1txKdl9Omk0fA",
  "expires_in": 3600
}
```

### 2. å•Ÿå‹•å°è©±

**ç«¯é»**: `POST /conversations`

**ç”¨é€”**: å‰µå»ºæ–°çš„å°è©±æœƒè©±

####  Request åƒæ•¸

**Headers**:
```
Authorization: Bearer {YOUR_TOKEN}
Content-Type: application/json
```

**æ³¨æ„**: `YOUR_TOKEN` æ˜¯é€šéä¸Šè¿° Bot Secret ç”Ÿæˆçš„è¨ªå• token ï¼Œæœ‰æ•ˆæœŸç‚º 1 å°æ™‚ã€‚

**Request Body**: `{}` (ç„¡)

####  Response åƒæ•¸

**æˆåŠŸ Response** (status_code =  200 æˆ– 201):

| æ¬„ä½åç¨± | é¡å‹ | å¿…å¡« | æè¿° | ç¯„ä¾‹å€¼ |
|---------|------|------|------|--------|
| `conversationId` | string | æ˜¯ | å°è©±çš„å”¯ä¸€æ¨™è­˜ç¬¦ | `"IxMX0bH5G4aKssAPYa18Pu-as"` |
| `token` | string | æ˜¯ | æ›´æ–°çš„ JWT  token | `"eyJhbGciOiJSUzI1NiIsImtpZCI6IkpHd3R5VFZ6S1Z3ZjVIT0U5YlpqWmNFdjEtbyIsIng1dCI6IkpHd3R5VFZ6S1Z3ZjVIT0U5YlpqWmNFdjEtbyIsInR5cCI6IkpXVCJ9..."` |
| `expires_in` | integer | æ˜¯ |  tokenéæœŸæ™‚é–“ï¼ˆç§’ï¼‰ | `3600` |
| `streamUrl` | string | æ˜¯ | WebSocket æµé€£æ¥ URL | `"wss://directline.botframework.com/v3/directline/conversations/IxMX0bH5G4aKssAPYa18Pu-as/stream?watermark=-&t=..."` |
| `referenceGrammarId` | string | æ˜¯ | åƒè€ƒèªæ³• ID | `"cfedcfc4-c053-ad52-b7a7-d09259924d1d"` |

**Response ç¯„ä¾‹**:
```json
{
  "conversationId": "IxMX0bH5G4aKssAPYa18Pu-as",
  "token": "eyJhbGciOiJSUzI1NiIsImtpZCI6IkpHd3R5VFZ6S1Z3ZjVIT0U5YlpqWmNFdjEtbyIsIng1dCI6IkpHd3R5VFZ6S1Z3ZjVIT0U5YlpqWmNFdjEtbyIsInR5cCI6IkpXVCJ9.eyJib3QiOiJncmFwaGljLWJvdCIsInNpdGUiOiI5M3hlOHdrM1VmcndnOXNnaWRzam9BQWpxWjlTeXJlZGFRV3JicXJsMklqM3V3VEtHN1QwSlFRSjk5QkdBQzI0cGJFQUFyb2hBQUFCQVpCUzJwWjgiLCJjb252IjoiSXhNWDBiSDVHNGFLc3NBUFlhMThQdS1hcyIsIm5iZiI6MTc1Mjg1MzE4MSwiZXhwIjoxNzUyODU2NzgxLCJpc3MiOiJodHRwczovL2RpcmVjdGxpbmUuYm90ZnJhbWV3b3JrLmNvbS8iLCJhdWQiOiJodHRwczovL2RpcmVjdGxpbmUuYm90ZnJhbWV3b3JrLmNvbS8ifQ.yyAWWX8sX-Mq__5u68I_XIGv7-SJdyJIXu9byRexm9QFE6yil4F8gk7LmTFbRqjdrYm-ufJh2tOCAOmRDno5HR9qjGh0p8Xkrs2vZDlVdwawBefUABiihFn96tSb61prumoRkc1nV--bKqy3CBKzE6orafwDCH7uarUlrL2EGt12wNo0XF-_nqreLH7OIwomKxdsGqX7HAByufQu4pj326LGFnFbtlzyVJi96BN59YypZrp6YbxTJ7Vd14jao8XzU8OfQBDzcAXLRuSteB1cd2nXpHFbAFAOjwaoqNkxAncpO2UD6qmbi1trp6y5jImsPpsgvG45X1txKdl9Omk0fA",
  "expires_in": 3600,
  "streamUrl": "wss://directline.botframework.com/v3/directline/conversations/IxMX0bH5G4aKssAPYa18Pu-as/stream?watermark=-&t=eyJhbGciOiJSUzI1NiIsImtpZCI6IkpHd3R5VFZ6S1Z3ZjVIT0U5YlpqWmNFdjEtbyIsIng1dCI6IkpHd3R5VFZ6S1Z3ZjVIT0U5YlpqWmNFdjEtbyIsInR5cCI6IkpXVCJ9.eyJib3QiOiJncmFwaGljLWJvdCIsInNpdGUiOiI5M3hlOHdrM1VmcndnOXNnaWRzam9BQWpxWjlTeXJlZGFRV3JicXJsMklqM3V3VEtHN1QwSlFRSjk5QkdBQzI0cGJFQUFyb2hBQUFCQVpCUzJwWjgiLCJjb252IjoiSXhNWDBiSDVHNGFLc3NBUFlhMThQdS1hcyIsIm5iZiI6MTc1Mjg1MzE4MSwiZXhwIjoxNzUyODUzMjQxLCJpc3MiOiJodHRwczovL2RpcmVjdGxpbmUuYm90ZnJhbWV3b3JrLmNvbS8iLCJhdWQiOiJodHRwczovL2RpcmVjdGxpbmUuYm90ZnJhbWV3b3JrLmNvbS8ifQ.F3MuDtVV9vrP0eMXLa45gnAfN9fwLgRMFM31B7jV9XJE4gAKHWWHsQic0Em60X7s1g2ZtSQU1Sph2u3p7LqMLepqQq4g-iX5qlN2yDP96CFok8nhBCiaDoWEd0REIyS6c9CTEJDW6WssroToSwj0FpHzSBzxg4FEvFr85b86oMI6HK_tekLD_H24KyObbIQzU1u-knXKFX6IP_bmtZwDp1KFSuURyxrrbcKMhOCLdLUe84x2Mvi-uLodTxyLUZJk8gUB0n03jOtpRcCeDJQN84UTOQ5A-WqAWZOUXNUnZOkWRmGB853eAFQwHtGWKXvPkGDq4Rb0Ruv6LcblhGhzhg",
  "referenceGrammarId": "cfedcfc4-c053-ad52-b7a7-d09259924d1d"
}
```

### 3. ç™¼é€è¨Šæ¯

**ç«¯é»**: `POST /conversations/{conversationId}/activities`

**ç”¨é€”**: å‘æˆ‘å€‘çš„æ©Ÿå™¨äººæœå‹™ç™¼é€è¨Šæ¯

####  Request åƒæ•¸

**Headers**:
```
Authorization: Bearer {YOUR_TOKEN}
Content-Type: application/json
```

**æ³¨æ„**: `YOUR_TOKEN` æ˜¯é€šé Bot Secret ç”Ÿæˆçš„è¨ªå• token ï¼Œè«‹ç¢ºä¿ token æœªéæœŸã€‚

**Path Parameters**:
| åƒæ•¸åç¨± | é¡å‹ | å¿…å¡« | æè¿° |
|---------|------|------|------|
| `conversationId` | string | æ˜¯ | å°è©± ID |

**Request Body**:
| æ¬„ä½åç¨± | é¡å‹ | å¿…å¡« | æè¿° | ç¯„ä¾‹å€¼ |
|---------|------|------|------|--------|
| `type` | string | æ˜¯ | æ´»å‹•é¡å‹ï¼Œå›ºå®šå€¼ç‚º `"message"` | `"message"` |
| `from` | object | æ˜¯ | ç™¼é€è€…è³‡è¨Š | `{"id": "user_id"}` |
| `text` | string | æ˜¯ | è¨Šæ¯å…§å®¹ | `"ä½ å¥½ï¼Œé€™æ˜¯æ¸¬è©¦è¨Šæ¯"` |

**é‡è¦èªªæ˜**:
- `type` æ¬„ä½å¿…é ˆå›ºå®šç‚º `"message"`ï¼Œä¸å¯æ›´æ”¹
- `from.id` å¿…é ˆå¡«å…¥æ‚¨çš„ç”¨æˆ¶ IDï¼Œç”¨æ–¼è­˜åˆ¥è¨Šæ¯ç™¼é€è€…
- è«‹ç¢ºä¿ `user_id` æ˜¯æ‚¨ç³»çµ±ä¸­çš„æœ‰æ•ˆç”¨æˆ¶æ¨™è­˜ç¬¦

** Request ç¯„ä¾‹**:
```json
{
  "type": "message",
  "from": {
    "id": "user_12345"
  },
  "text": "ä½ å¥½ï¼Œé€™æ˜¯æ¸¬è©¦è¨Šæ¯"
}
```

**æ ¼å¼è¦æ±‚**:
- `type` å¿…é ˆç‚º `"message"`
- `from.id` å¿…é ˆç‚ºæœ‰æ•ˆçš„ç”¨æˆ¶ ID
- è«‹å°‡ `user_12345` æ›¿æ›ç‚ºæ‚¨å¯¦éš›çš„ç”¨æˆ¶ ID

####  Response åƒæ•¸

**æˆåŠŸ Response** (status_code =  200):

| æ¬„ä½åç¨± | é¡å‹ | å¿…å¡« | æè¿° | ç¯„ä¾‹å€¼ |
|---------|------|------|------|--------|
| `id` | string | æ˜¯ | æ´»å‹•çš„å”¯ä¸€æ¨™è­˜ç¬¦ | `"IxMX0bH5G4aKssAPYa18Pu-as|0000002"` |

**Response ç¯„ä¾‹**:
```json
{
  "id": "IxMX0bH5G4aKssAPYa18Pu-as|0000002"
}
```

### 4. ç²å–å°è©±ç‹€æ…‹

**ç«¯é»**: `GET /conversations/{conversationId}/activities`

**ç”¨é€”**: æª¢ç´¢å°è©±ä¸­çš„æ‰€æœ‰ç‹€æ…‹è¨˜éŒ„

**ç‚ºä»€éº¼éœ€è¦é€™å€‹ APIï¼Ÿ**
ç•¶æ‚¨ç™¼é€è¨Šæ¯çµ¦æ©Ÿå™¨äººå¾Œï¼Œæ©Ÿå™¨äººéœ€è¦æ™‚é–“è™•ç†ä¸¦å›è¦†ã€‚ç”±æ–¼è™•ç†æ™‚é–“ä¸å›ºå®šï¼Œæ‚¨éœ€è¦å®šæœŸæª¢æŸ¥æ˜¯å¦æœ‰å›è¦†ã€‚é€™å€‹ API è®“æ‚¨èƒ½å¤ ç²å–æ©Ÿå™¨äººçš„å›è¦†ç‹€æ…‹ã€‚

**å…©ç¨®ç”¨æ³•**:
1. **ç²å–æ‰€æœ‰è¨˜éŒ„**: ä¸ä½¿ç”¨ watermark åƒæ•¸ï¼Œç²å–å®Œæ•´å°è©±æ­·å²
2. **ç²å–æ–°å›è¦†**: ä½¿ç”¨ watermark åƒæ•¸ï¼Œåªç²å–ä¸Šæ¬¡æª¢æŸ¥å¾Œçš„æ–°å›è¦†

####  Request åƒæ•¸

**Headers**:
```
Authorization: Bearer {YOUR_TOKEN}
```

**æ³¨æ„**: `YOUR_TOKEN` æ˜¯é€šé Bot Secret ç”Ÿæˆçš„è¨ªå• token ï¼Œè«‹ç¢ºä¿ token æœªéæœŸã€‚

**Path Parameters**:
| åƒæ•¸åç¨± | é¡å‹ | å¿…å¡« | æè¿° |
|---------|------|------|------|
| `conversationId` | string | æ˜¯ | å°è©± ID |

**Query Parameters**:
| åƒæ•¸åç¨± | é¡å‹ | å¿…å¡« | æè¿° | ç¯„ä¾‹å€¼ |
|---------|------|------|------|--------|
| `watermark` | string | å¦ | åªæª¢ç´¢æŒ‡å®šæ°´å°ä¹‹å¾Œçš„æ–°å›è¦† | `"3"` |

**Watermark æ©Ÿåˆ¶èªªæ˜**:
- Watermark æ˜¯ä¸€å€‹æ•¸å­—æ¨™è­˜ç¬¦ï¼Œä»£è¡¨å°è©±ä¸­æœ€å¾Œä¸€å€‹ç‹€æ…‹çš„åºè™Ÿ
- ç•¶æ‚¨ä½¿ç”¨ watermark åƒæ•¸æ™‚ï¼ŒAPI åªæœƒè¿”å›è©²æ°´å°ä¹‹å¾Œçš„æ–°å›è¦†
- é€™å¯ä»¥é¿å…é‡è¤‡ç²å–å·²ç¶“è®€å–éçš„è¨Šæ¯ï¼Œä»¥æé«˜æ•ˆç‡
- æ¯æ¬¡ç²å–ç‹€æ…‹æ™‚ï¼ŒéŸ¿æ‡‰ä¸­éƒ½æœƒåŒ…å«æ–°çš„ watermark å€¼
- å»ºè­°åœ¨ä¸‹æ¬¡è«‹æ±‚æ™‚ä½¿ç”¨é€™å€‹æ–°çš„ watermark å€¼


#### Response åƒæ•¸

**æˆåŠŸ Response** (status_code =  200):

| æ¬„ä½åç¨± | é¡å‹ | å¿…å¡« | æè¿° |
|---------|------|------|------|
| `activities` | array | æ˜¯ | ç‹€æ…‹è¨˜éŒ„åˆ—è¡¨ |
| `watermark` | string | æ˜¯ | ç•¶å‰æ°´å°å€¼ |

**`activities` çµæ§‹**:
| æ¬„ä½åç¨± | é¡å‹ | å¿…å¡« | æè¿° | ç¯„ä¾‹å€¼ |
|---------|------|------|------|--------|
| `type` | string | æ˜¯ | æ´»å‹•é¡å‹ | `"message"` |
| `id` | string | æ˜¯ | ç‹€æ…‹è¨˜éŒ„ ID | `"IxMX0bH5G4aKssAPYa18Pu-as|0000000"` |
| `timestamp` | string | æ˜¯ | æ™‚é–“æˆ³ | `"2025-07-18T15:39:41.9094513Z"` |
| `channelId` | string | æ˜¯ | é »é“ ID | `"directline"` |
| `from` | object | æ˜¯ | ç™¼é€è€…è³‡è¨Š | `{"id": "user_12345"}` æˆ– `{"id": "graphic-bot", "name": "graphic-bot"}` |
| `conversation` | object | æ˜¯ | å°è©±è³‡è¨Š | `{"id": "IxMX0bH5G4aKssAPYa18Pu-as"}` |
| `text` | string | æ˜¯ | è¨Šæ¯å…§å®¹ | `"Hi, æœ‰ä»€éº¼å¯ä»¥å¹«åŠ©æ‚¨çš„å—ï¼Ÿ"` |
| `inputHint` | string | å¦ | è¼¸å…¥æç¤º | `"acceptingInput"` |
| `replyToId` | string | å¦ | å›è¦†çš„ç‹€æ…‹è¨˜éŒ„ ID | `"EU8s4dhSq1Y"` |
| `serviceUrl` | string | å¦ | æœå‹™ URL | `"https://directline.botframework.com/"` |

**Response ç¯„ä¾‹**:
```json
{
  "activities": [
    {
      "type": "message",
      "id": "IxMX0bH5G4aKssAPYa18Pu-as|0000000",
      "timestamp": "2025-07-18T15:39:41.9094513Z",
      "channelId": "directline",
      "from": {
        "id": "graphic-bot",
        "name": "graphic-bot"
      },
      "conversation": {
        "id": "IxMX0bH5G4aKssAPYa18Pu-as"
      },
      "text": "Hi, æœ‰ä»€éº¼å¯ä»¥å¹«åŠ©æ‚¨çš„å—ï¼Ÿ",
      "inputHint": "acceptingInput",
      "replyToId": "EU8s4dhSq1Y"
    },
    {
      "type": "message",
      "id": "IxMX0bH5G4aKssAPYa18Pu-as|0000002",
      "timestamp": "2025-07-18T15:39:42.2011152Z",
      "serviceUrl": "https://directline.botframework.com/",
      "channelId": "directline",
      "from": {
        "id": "user_12345"
      },
      "conversation": {
        "id": "IxMX0bH5G4aKssAPYa18Pu-as"
      },
      "text": "ä½ å¥½ï¼Œé€™æ˜¯æ¸¬è©¦è¨Šæ¯"
    },
    {
      "type": "message",
      "id": "IxMX0bH5G4aKssAPYa18Pu-as|0000003",
      "timestamp": "2025-07-18T15:39:44.146617Z",
      "channelId": "directline",
      "from": {
        "id": "graphic-bot",
        "name": "graphic-bot"
      },
      "conversation": {
        "id": "IxMX0bH5G4aKssAPYa18Pu-as"
      },
      "text": "ä½ å¥½ï¼å†æ¬¡æ”¶åˆ°æ‚¨çš„æ¸¬è©¦è¨Šæ¯ï¼Œéš¨æ™‚å‘Šè¨´æˆ‘éœ€è¦å”åŠ©çš„å…§å®¹å–”ï¼ğŸ˜Š",
      "inputHint": "acceptingInput",
      "replyToId": "IxMX0bH5G4aKssAPYa18Pu-as|0000002"
    }
  ],
  "watermark": "3"
}
```

**Watermark ä½¿ç”¨å ´æ™¯**:
- **è¼ªè©¢æ©Ÿå™¨äººå›è¦†**: å®šæœŸæª¢æŸ¥æ©Ÿå™¨äººæ˜¯å¦æœ‰æ–°å›è¦†
- **é¿å…é‡è¤‡**: é˜²æ­¢é‡è¤‡ç²å–å·²ç¶“è™•ç†éçš„ç‹€æ…‹è¨˜éŒ„
- **æé«˜æ•ˆç‡**: æ¸›å°‘ä¸å¿…è¦çš„æ•¸æ“šå‚³è¼¸
- **å¯¦æ™‚æ›´æ–°**: é…åˆè¼ªè©¢æ©Ÿåˆ¶å¯¦ç¾é¡ä¼¼å¯¦æ™‚çš„æ•ˆæœ

**å¯¦éš›æ‡‰ç”¨æµç¨‹**:
1. ç”¨æˆ¶ç™¼é€è¨Šæ¯ â†’ æ©Ÿå™¨äººé–‹å§‹è™•ç†
2. å®šæœŸæª¢æŸ¥å›è¦†ï¼ˆæ¯ 1-3 ç§’ï¼‰â†’ ä½¿ç”¨ watermark åªæª¢æŸ¥æ–°å›è¦†
3. æ”¶åˆ°æ©Ÿå™¨äººå›è¦† â†’ æ›´æ–° watermark
4. ç¹¼çºŒç­‰å¾…æˆ–ç™¼é€ä¸‹ä¸€æ¢è¨Šæ¯

**ä½¿ç”¨æµç¨‹**:
1. é¦–æ¬¡ç²å–å°è©±ç‹€æ…‹æ™‚ä¸ä½¿ç”¨ watermark åƒæ•¸
2. å¾éŸ¿æ‡‰ä¸­ç²å– watermark å€¼ï¼ˆä¾‹å¦‚ï¼š"3"ï¼‰
3. ä¸‹æ¬¡è«‹æ±‚æ™‚ä½¿ç”¨ `?watermark=3`
4. å¦‚æœæ²’æœ‰æ–°ç‹€æ…‹ï¼Œè¿”å›ç©ºåˆ—è¡¨å’Œç›¸åŒçš„ watermark
5. å¦‚æœæœ‰æ–°ç‹€æ…‹ï¼Œè¿”å›æ–°ç‹€æ…‹å’Œæ›´æ–°çš„ watermark

**è¼ªè©¢å»ºè­°**:
- å»ºè­°æ¯ 1-3 ç§’æª¢æŸ¥ä¸€æ¬¡æ–°å›è¦†
- æ©Ÿå™¨äººè™•ç†æ™‚é–“é€šå¸¸åœ¨ 1-10 ç§’ä¹‹é–“
- å¦‚æœè¶…é 30 ç§’æ²’æœ‰å›è¦†ï¼Œå¯èƒ½éœ€è¦é‡æ–°ç™¼é€è¨Šæ¯

**Response ç¯„ä¾‹** (ç•¶æ²’æœ‰æ–°ç‹€æ…‹æ™‚):
```json
{
  "activities": [],
  "watermark": "3"
}
```

**Response ç¯„ä¾‹** (ç•¶æœ‰æ–°ç‹€æ…‹æ™‚):
```json
{
  "activities": [
    {
      "type": "message",
      "id": "IxMX0bH5G4aKssAPYa18Pu-as|0000004",
      "timestamp": "2025-07-18T15:40:00.0000000Z",
      "channelId": "directline",
      "from": {
        "id": "graphic-bot",
        "name": "graphic-bot"
      },
      "conversation": {
        "id": "IxMX0bH5G4aKssAPYa18Pu-as"
      },
      "text": "é€™æ˜¯æ–°æ”¶åˆ°çš„è¨Šæ¯",
      "inputHint": "acceptingInput"
    }
  ],
  "watermark": "4"
}
```

**æ³¨æ„**: åœ¨éŸ¿æ‡‰ä¸­ï¼Œ`from.id` æœƒé¡¯ç¤ºå¯¦éš›çš„ç”¨æˆ¶ IDï¼ˆå¦‚ `user_12345`ï¼‰æˆ–æ©Ÿå™¨äºº IDï¼ˆå¦‚ `graphic-bot`ï¼‰



## éŒ¯èª¤ä»£ç¢¼

| HTTP ç‹€æ…‹ç¢¼ | æè¿° | è§£æ±ºæ–¹æ¡ˆ |
|------------|------|----------|
| 200 |  Request æˆåŠŸ | - |
| 201 | è³‡æºå‰µå»ºæˆåŠŸ | - |
| 400 |  Request åƒæ•¸ç„¡æ•ˆ | æª¢æŸ¥ Request åƒæ•¸æ ¼å¼ |
| 401 |  tokenç„¡æ•ˆæˆ–å·²éæœŸ | é‡æ–°ç”Ÿæˆ token |
| 404 | å°è©±æœªæ‰¾åˆ° | æª¢æŸ¥å°è©± ID |
| 429 |  Request é »ç‡éé«˜ | é™ä½ Request é »ç‡ |
| 500 | æœå‹™å™¨å…§éƒ¨éŒ¯èª¤ | ç¨å¾Œé‡è©¦ |

## é‡è¦æ³¨æ„äº‹é …

1. **tokenéæœŸ**:  tokenåœ¨ 1 å°æ™‚å¾ŒéæœŸï¼ˆ3600 ç§’ï¼‰
2. **å°è©±ç‹€æ…‹**: æ¯å€‹å°è©±æœƒè©±éƒ½æ˜¯ç¨ç«‹çš„
3. **éŒ¯èª¤è™•ç†**: å§‹çµ‚æª¢æŸ¥ HTTP ç‹€æ…‹ç¢¼
4. **è¼ªè©¢ç­–ç•¥**: ç”±æ–¼æ©Ÿå™¨äººå›è¦†æ™‚é–“ä¸å›ºå®šï¼Œå»ºè­°æ¯ 1-3 ç§’æª¢æŸ¥ä¸€æ¬¡æ–°å›è¦†
5. **å®‰å…¨æ€§**: åˆ‡å‹¿åœ¨å®¢æˆ¶ç«¯ä»£ç¢¼ä¸­æš´éœ²æ‚¨çš„ Bot Secretï¼Œå¦‚æœ‰éºå¤±è«‹ç«‹å³è¯ç¹«æˆ‘å€‘çš„æŠ€è¡“æ”¯æ´åœ˜éšŠ
6. **æ°´å°ä½¿ç”¨**: ä½¿ç”¨æ°´å°åªç²å–æ–°ç‹€æ…‹ï¼Œé¿å…é‡è¤‡ç²å–å·²è™•ç†çš„ç‹€æ…‹è¨˜éŒ„