# èŠå¤©è¨˜éŒ„ä½¿ç”¨åƒè€ƒæ–‡ç» API èªªæ˜

## æ¦‚è¿°

æä¾›å°è©±èŠå¤©è¨˜éŒ„æ‰€å¼•ç”¨çš„åƒè€ƒæ–‡ç»

**é‡è¦**: ä½¿ç”¨æœ¬ API å‰ï¼Œè«‹å…ˆå‘æˆ‘å€‘çš„æŠ€è¡“æ”¯æ´åœ˜éšŠç”³è«‹ CMS API Keyï¼Œé€™æ˜¯è¨ªå•æˆ‘å€‘æœå‹™çš„å¿…è¦æ†‘è­‰ã€‚

## å¿«é€Ÿé–‹å§‹

### ç¨‹å¼èªè¨€ç¯„ä¾‹

æˆ‘å€‘æä¾›å¤šç¨®ç¨‹å¼èªè¨€çš„å®Œæ•´ç¯„ä¾‹ï¼ŒåŒ…å«æ‰€æœ‰ API èª¿ç”¨çš„å¯¦ä½œï¼š

- ğŸ“ [Python ç¯„ä¾‹](python_demo/) - å®Œæ•´çš„ Python å¯¦ä½œ
- ğŸ˜ [PHP ç¯„ä¾‹](php_demo/) - å®Œæ•´çš„ PHP å¯¦ä½œ

## åŸºç¤è³‡è¨Š

- **èªè­‰æ–¹å¼**: API Key (X-API-Key Header)
- **å…§å®¹é¡å‹**: `application/json`
- **API Key æ ¼å¼**: `{CMS-API-KEY}`

## API ç«¯é»è©³ç´°èªªæ˜

### æª¢ç´¢èŠå¤©è¨˜éŒ„

**ç«¯é»**: `GET /chatlog/conversation/{conversation_id}/channel/{channel_id}/user/{user_id}`

**ç”¨é€”**: æª¢ç´¢ç‰¹å®šå°è©±çš„èŠå¤©è¨˜éŒ„ï¼Œæå–å…ƒæ•¸æ“šä¸¦æ ¼å¼åŒ–å›æ‡‰

#### Request åƒæ•¸

**Headers**:
```
X-API-Key: {CMS-API-KEY}
Content-Type: application/json
```

**URL åƒæ•¸**:

| åƒæ•¸åç¨± | é¡å‹ | å¿…å¡« | æè¿° | ç¯„ä¾‹å€¼ |
|---------|------|------|------|--------|
| `conversation_id` | string | æ˜¯ | è¦æª¢ç´¢è¨˜éŒ„çš„å°è©±å”¯ä¸€æ¨™è­˜ç¬¦ | `"1752304746"` |
| `channel_id` | string | æ˜¯ | é »é“æ¨™è­˜ç¬¦ | `"directline"` |
| `user_id` | string | æ˜¯ | ç”¨æˆ¶å”¯ä¸€æ¨™è­˜ç¬¦ | `"febf6976-d245-4490-a38a-7fd9e905e3df"` |

#### Response åƒæ•¸

**æˆåŠŸ Response** (status_code = 200):

| æ¬„ä½åç¨± | é¡å‹ | å¿…å¡« | æè¿° | ç¯„ä¾‹å€¼ |
|---------|------|------|------|--------|
| `code` | integer | æ˜¯ | HTTP ç‹€æ…‹ç¢¼ | `200` |
| `msg` | string | æ˜¯ | ç¢ºèªè¨Šæ¯ | `"Chat logs retrieved successfully"` |
| `data` | array | æ˜¯ | èŠå¤©è¨˜éŒ„æ‘˜è¦é™£åˆ— | è¦‹ä¸‹æ–¹ç¯„ä¾‹ |
| `conversation_id` | string | æ˜¯ | å°è©±æ¨™è­˜ç¬¦ | `"1752304746"` |
| `channel_id` | string | æ˜¯ | é »é“æ¨™è­˜ç¬¦ | `"directline"` |
| `created_at` | integer | æ˜¯ | Unix æ™‚é–“æˆ³è¨˜ (ç§’) | `1752275951` |
| `meta` | array | æ˜¯ | åŒ…å«æ–‡ä»¶æ¨™é¡Œçš„å…ƒæ•¸æ“šç‰©ä»¶é™£åˆ— | è¦‹ä¸‹æ–¹ç¯„ä¾‹ |
| `title` | string | æ˜¯ | åƒè€ƒæ–‡ä»¶çš„æ¨™é¡Œ | `"G492.txt"` |

**Response ç¯„ä¾‹**:
```json
{
  "code": 200,
  "msg": "Chat logs retrieved successfully",
  "data": [
    {
      "conversation_id": "1752304746",
      "channel_id": "directline",
      "created_at": 1752275951,
      "meta": [
        {
          "title": "G492.txt"
        },
        {
          "title": "114æœŸå°å…¥æ–‡å‰µæ‰“é–‹å¸‚å ´æ•²é–€ç£š.pdf"
        },
        {
          "title": "132æœŸé‹ç”¨ChatGPTç”Ÿæˆæ–‡ç« çš„æ­¥é©Ÿ.pdf"
        }
      ]
    }
  ]
}
```

#### ç‹€æ…‹ç¢¼

| ç‹€æ…‹ç¢¼ | æè¿° |
|--------|------|
| `200 OK` | èŠå¤©è¨˜éŒ„æª¢ç´¢æˆåŠŸ |
| `403 Forbidden` | ç¼ºå°‘æˆ–ç„¡æ•ˆçš„ API Key |
| `500 Internal Server Error` | ä¼ºæœå™¨ç«¯éŒ¯èª¤ |

#### æ³¨æ„äº‹é …

- åªæœƒè¿”å›å…·æœ‰æœ‰æ•ˆå…ƒæ•¸æ“šçš„èŠå¤©è¨˜éŒ„
- `meta` æ¬„ä½åŒ…å«å¾åŸå§‹èŠå¤©è¨˜éŒ„å…ƒæ•¸æ“šä¸­æå–çš„æ–‡ä»¶æ¨™é¡Œ
- æ™‚é–“æˆ³è¨˜ä»¥ Unix æ™‚é–“æˆ³è¨˜æ ¼å¼è¿”å› (è‡ªç´€å…ƒä»¥ä¾†çš„ç§’æ•¸)
- æ²’æœ‰å…ƒæ•¸æ“šçš„æ–‡ä»¶æœƒè‡ªå‹•è¢«éæ¿¾æ‰
- API æ”¯æ´æ¯å€‹èŠå¤©è¨˜éŒ„æ¢ç›®çš„å¤šå€‹å…ƒæ•¸æ“šç‰©ä»¶

## éŒ¯èª¤è™•ç†

| éŒ¯èª¤ç¢¼ | æè¿° |
|--------|------|
| 400 Bad Request | è«‹æ±‚åŒ…å«ç„¡æ•ˆåƒæ•¸æˆ–ç¼ºå°‘æ¬„ä½ |
| 403 Forbidden | ç¼ºå°‘æˆ–ç„¡æ•ˆçš„ API Key |
| 404 Not Found | è«‹æ±‚çš„è³‡æºä¸å­˜åœ¨ |
| 500 Internal Server Error | æ„å¤–çš„ä¼ºæœå™¨ç«¯éŒ¯èª¤ |

## ä½¿ç”¨ç¯„ä¾‹

### cURL ç¯„ä¾‹

```bash
curl -X GET "https://api.example.com/chatlog/conversation/1752304746/channel/directline/user/febf6976-d245-4490-a38a-7fd9e905e3df" \
  -H "X-API-Key: {CMS-API-KEY}" \
  -H "Content-Type: application/json"
```



## æ”¯æ´

å¦‚æœæ‚¨åœ¨ä½¿ç”¨éç¨‹ä¸­é‡åˆ°ä»»ä½•å•é¡Œï¼Œè«‹è¯ç¹«æˆ‘å€‘çš„æŠ€è¡“æ”¯æ´åœ˜éšŠã€‚